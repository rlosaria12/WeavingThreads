
<form method="get">
  Year: <input type="number" name="year" value="{{ year }}" required>
  Program:
  <select name="program" onchange="this.form.submit()">
      <option value="">-- Select Program --</option>
      {% for p in programs %}
          <option value="{{ p.id }}" {% if p.id|stringformat:'s' == selected_program %}selected{% endif %}>{{ p }}</option>
      {% endfor %}
  </select>
  <button type="submit">Load</button>
</form>

{% if subprograms %}
<form method="post">
  {% csrf_token %}
  <input type="hidden" name="year" value="{{ year }}">
  <input type="hidden" name="program" value="{{ selected_program }}">

  <h3>Sub-Programs</h3>
  <table border="1" cellpadding="5" cellspacing="0">
      <tr>
          <th>Sub-Program</th>
          <th>Output Indicator(s)</th>
          <th>Target Indicator(s)</th>
      </tr>
      {% for sub in subprograms %}
      <tr>
          <td>
              {{ sub }}
              <input type="hidden" name="subprogram_id" value="{{ sub.id }}">
          </td>
          <td><input type="text" name="output_indicator"></td>
          <td><input type="text" name="target_indicator"></td>
      </tr>
      {% endfor %}
  </table>

  <button type="submit">Save Indicators</button>
</form>
{% endif %}

{% if saved %}
<p style="color: green;">âœ… Indicators saved successfully!</p>
{% endif %}
